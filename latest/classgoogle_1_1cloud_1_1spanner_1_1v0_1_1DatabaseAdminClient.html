<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Google Cloud Spanner C++ Client: google::cloud::spanner::v0::DatabaseAdminClient Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Google Cloud Spanner C++ Client
   &#160;<span id="projectnumber">0.10.0</span>
   </div>
   <div id="projectbrief">A C++ Client Library for Google Cloud Spanner</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacegoogle.html">google</a></li><li class="navelem"><a class="el" href="namespacegoogle_1_1cloud.html">cloud</a></li><li class="navelem"><a class="el" href="namespacegoogle_1_1cloud_1_1spanner.html">spanner</a></li><li class="navelem"><a class="el" href="namespacegoogle_1_1cloud_1_1spanner_1_1v0.html">v0</a></li><li class="navelem"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient.html">DatabaseAdminClient</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">google::cloud::spanner::v0::DatabaseAdminClient Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Performs database administration operations on Spanner.  
 <a href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="database__admin__client_8h_source.html">google/cloud/spanner/database_admin_client.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a5359f2621faada447be80416df5e2eba"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient.html#a5359f2621faada447be80416df5e2eba">DatabaseAdminClient</a> (<a class="el" href="namespacegoogle_1_1cloud_1_1spanner_1_1v0.html#a961720bcfc703bd430b89359180eb1c3">ConnectionOptions</a> const &amp;options=<a class="el" href="namespacegoogle_1_1cloud_1_1spanner_1_1v0.html#a961720bcfc703bd430b89359180eb1c3">ConnectionOptions</a>())</td></tr>
<tr class="separator:a5359f2621faada447be80416df5e2eba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af19c5d53e7f32bba140cd74fdf4dfe05"><td class="memItemLeft" align="right" valign="top">future&lt; StatusOr&lt; google::spanner::admin::database::v1::Database &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient.html#af19c5d53e7f32bba140cd74fdf4dfe05">CreateDatabase</a> (<a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Database.html">Database</a> db, std::vector&lt; std::string &gt; extra_statements={})</td></tr>
<tr class="memdesc:af19c5d53e7f32bba140cd74fdf4dfe05"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new Cloud Spanner database in the given project and instance.  <a href="#af19c5d53e7f32bba140cd74fdf4dfe05">More...</a><br /></td></tr>
<tr class="separator:af19c5d53e7f32bba140cd74fdf4dfe05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f4ce7fb02cbbede35467247c5b42b00"><td class="memItemLeft" align="right" valign="top">StatusOr&lt; google::spanner::admin::database::v1::Database &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient.html#a9f4ce7fb02cbbede35467247c5b42b00">GetDatabase</a> (<a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Database.html">Database</a> db)</td></tr>
<tr class="memdesc:a9f4ce7fb02cbbede35467247c5b42b00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve metadata information about a database.  <a href="#a9f4ce7fb02cbbede35467247c5b42b00">More...</a><br /></td></tr>
<tr class="separator:a9f4ce7fb02cbbede35467247c5b42b00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75e7f11200ee24f0fb26b63972b0869f"><td class="memItemLeft" align="right" valign="top">StatusOr&lt; google::spanner::admin::database::v1::GetDatabaseDdlResponse &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient.html#a75e7f11200ee24f0fb26b63972b0869f">GetDatabaseDdl</a> (<a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Database.html">Database</a> db)</td></tr>
<tr class="memdesc:a75e7f11200ee24f0fb26b63972b0869f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve a database schema.  <a href="#a75e7f11200ee24f0fb26b63972b0869f">More...</a><br /></td></tr>
<tr class="separator:a75e7f11200ee24f0fb26b63972b0869f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a772381bd10480013561ad30dccd3f7db"><td class="memItemLeft" align="right" valign="top">future&lt; StatusOr&lt; google::spanner::admin::database::v1::UpdateDatabaseDdlMetadata &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient.html#a772381bd10480013561ad30dccd3f7db">UpdateDatabase</a> (<a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Database.html">Database</a> db, std::vector&lt; std::string &gt; statements)</td></tr>
<tr class="memdesc:a772381bd10480013561ad30dccd3f7db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the database using a series of DDL statements.  <a href="#a772381bd10480013561ad30dccd3f7db">More...</a><br /></td></tr>
<tr class="separator:a772381bd10480013561ad30dccd3f7db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3443f1da6c949d195ac76b7ed6776c4"><td class="memItemLeft" align="right" valign="top">Status&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient.html#ab3443f1da6c949d195ac76b7ed6776c4">DropDatabase</a> (<a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Database.html">Database</a> db)</td></tr>
<tr class="memdesc:ab3443f1da6c949d195ac76b7ed6776c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Drops (deletes) an existing Cloud Spanner database.  <a href="#ab3443f1da6c949d195ac76b7ed6776c4">More...</a><br /></td></tr>
<tr class="separator:ab3443f1da6c949d195ac76b7ed6776c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae787f480f6b2ecc3bee04c2b23428390"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacegoogle_1_1cloud_1_1spanner_1_1v0.html#a26da85a6c1543ac1cabbb504cf6da973">ListDatabaseRange</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient.html#ae787f480f6b2ecc3bee04c2b23428390">ListDatabases</a> (<a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Instance.html">Instance</a> in)</td></tr>
<tr class="memdesc:ae787f480f6b2ecc3bee04c2b23428390"><td class="mdescLeft">&#160;</td><td class="mdescRight">List all the databases in a give project and instance.  <a href="#ae787f480f6b2ecc3bee04c2b23428390">More...</a><br /></td></tr>
<tr class="separator:ae787f480f6b2ecc3bee04c2b23428390"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add59d6662b3c8b61d1a2a7e9c75fe42f"><td class="memItemLeft" align="right" valign="top">future&lt; StatusOr&lt; google::spanner::admin::database::v1::Database &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient.html#add59d6662b3c8b61d1a2a7e9c75fe42f">RestoreDatabase</a> (<a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Database.html">Database</a> db, <a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Backup.html">Backup</a> const &amp;backup)</td></tr>
<tr class="memdesc:add59d6662b3c8b61d1a2a7e9c75fe42f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new database by restoring from a completed backup.  <a href="#add59d6662b3c8b61d1a2a7e9c75fe42f">More...</a><br /></td></tr>
<tr class="separator:add59d6662b3c8b61d1a2a7e9c75fe42f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7c74ceaadeacdda81146714503a9852"><td class="memItemLeft" align="right" valign="top">future&lt; StatusOr&lt; google::spanner::admin::database::v1::Database &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient.html#ae7c74ceaadeacdda81146714503a9852">RestoreDatabase</a> (<a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Database.html">Database</a> db, google::spanner::admin::database::v1::Backup const &amp;backup)</td></tr>
<tr class="memdesc:ae7c74ceaadeacdda81146714503a9852"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new database by restoring from a completed backup.  <a href="#ae7c74ceaadeacdda81146714503a9852">More...</a><br /></td></tr>
<tr class="separator:ae7c74ceaadeacdda81146714503a9852"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18fff0d95cb3a597746ae6253c7dbc24"><td class="memItemLeft" align="right" valign="top">StatusOr&lt; google::iam::v1::Policy &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient.html#a18fff0d95cb3a597746ae6253c7dbc24">GetIamPolicy</a> (<a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Database.html">Database</a> db)</td></tr>
<tr class="memdesc:a18fff0d95cb3a597746ae6253c7dbc24"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the IAM policy for a database.  <a href="#a18fff0d95cb3a597746ae6253c7dbc24">More...</a><br /></td></tr>
<tr class="separator:a18fff0d95cb3a597746ae6253c7dbc24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8f5a36a409bf2f0161fdf37488a7d8d"><td class="memItemLeft" align="right" valign="top">StatusOr&lt; google::iam::v1::Policy &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient.html#af8f5a36a409bf2f0161fdf37488a7d8d">SetIamPolicy</a> (<a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Database.html">Database</a> db, google::iam::v1::Policy policy)</td></tr>
<tr class="memdesc:af8f5a36a409bf2f0161fdf37488a7d8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the IAM policy for the given database.  <a href="#af8f5a36a409bf2f0161fdf37488a7d8d">More...</a><br /></td></tr>
<tr class="separator:af8f5a36a409bf2f0161fdf37488a7d8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a27a871994081f7cb7ad726b4aecc60"><td class="memItemLeft" align="right" valign="top">StatusOr&lt; google::iam::v1::Policy &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient.html#a8a27a871994081f7cb7ad726b4aecc60">SetIamPolicy</a> (<a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Database.html">Database</a> const &amp;db, <a class="el" href="namespacegoogle_1_1cloud_1_1spanner_1_1v0.html#a17be538be6a68b58dc90bd72c47af092">IamUpdater</a> const &amp;updater)</td></tr>
<tr class="memdesc:a8a27a871994081f7cb7ad726b4aecc60"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the IAM policy for an instance using an optimistic concurrency control loop.  <a href="#a8a27a871994081f7cb7ad726b4aecc60">More...</a><br /></td></tr>
<tr class="separator:a8a27a871994081f7cb7ad726b4aecc60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3904f44d08265ea643460b60430b2f4"><td class="memItemLeft" align="right" valign="top">StatusOr&lt; google::iam::v1::Policy &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient.html#ae3904f44d08265ea643460b60430b2f4">SetIamPolicy</a> (<a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Database.html">Database</a> const &amp;db, <a class="el" href="namespacegoogle_1_1cloud_1_1spanner_1_1v0.html#a17be538be6a68b58dc90bd72c47af092">IamUpdater</a> const &amp;updater, std::unique_ptr&lt; <a class="el" href="namespacegoogle_1_1cloud_1_1spanner_1_1v0.html#a52b5d68feb45c40d761c79ee360b804c">TransactionRerunPolicy</a> &gt; rerun_policy, std::unique_ptr&lt; <a class="el" href="namespacegoogle_1_1cloud_1_1spanner_1_1v0.html#ae9894cd07fd5d6262b10e01f1307c951">BackoffPolicy</a> &gt; backoff_policy)</td></tr>
<tr class="memdesc:ae3904f44d08265ea643460b60430b2f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the IAM policy for an instance using an optimistic concurrency control loop.  <a href="#ae3904f44d08265ea643460b60430b2f4">More...</a><br /></td></tr>
<tr class="separator:ae3904f44d08265ea643460b60430b2f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a440216e84d05c6e7f7fd285012d342e8"><td class="memItemLeft" align="right" valign="top">StatusOr&lt; google::iam::v1::TestIamPermissionsResponse &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient.html#a440216e84d05c6e7f7fd285012d342e8">TestIamPermissions</a> (<a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Database.html">Database</a> db, std::vector&lt; std::string &gt; permissions)</td></tr>
<tr class="memdesc:a440216e84d05c6e7f7fd285012d342e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the subset of the permissions the caller has on the given database.  <a href="#a440216e84d05c6e7f7fd285012d342e8">More...</a><br /></td></tr>
<tr class="separator:a440216e84d05c6e7f7fd285012d342e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a783685d0a574302ff3122ca20c0165ee"><td class="memItemLeft" align="right" valign="top">future&lt; StatusOr&lt; google::spanner::admin::database::v1::Backup &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient.html#a783685d0a574302ff3122ca20c0165ee">CreateBackup</a> (<a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Database.html">Database</a> db, std::string backup_id, std::chrono::system_clock::time_point expire_time)</td></tr>
<tr class="memdesc:a783685d0a574302ff3122ca20c0165ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new Cloud Spanner backup for the given database.  <a href="#a783685d0a574302ff3122ca20c0165ee">More...</a><br /></td></tr>
<tr class="separator:a783685d0a574302ff3122ca20c0165ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14230c812dce088ae3f62161cface71a"><td class="memItemLeft" align="right" valign="top">StatusOr&lt; google::spanner::admin::database::v1::Backup &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient.html#a14230c812dce088ae3f62161cface71a">GetBackup</a> (<a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Backup.html">Backup</a> const &amp;backup)</td></tr>
<tr class="memdesc:a14230c812dce088ae3f62161cface71a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve metadata information about a <a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Backup.html" title="This class identifies a Cloud Spanner Backup.">Backup</a>.  <a href="#a14230c812dce088ae3f62161cface71a">More...</a><br /></td></tr>
<tr class="separator:a14230c812dce088ae3f62161cface71a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab85b26bda200ae3673d3555c2175a5da"><td class="memItemLeft" align="right" valign="top">Status&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient.html#ab85b26bda200ae3673d3555c2175a5da">DeleteBackup</a> (google::spanner::admin::database::v1::Backup const &amp;backup)</td></tr>
<tr class="memdesc:ab85b26bda200ae3673d3555c2175a5da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes a pending or completed <a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Backup.html" title="This class identifies a Cloud Spanner Backup.">Backup</a>.  <a href="#ab85b26bda200ae3673d3555c2175a5da">More...</a><br /></td></tr>
<tr class="separator:ab85b26bda200ae3673d3555c2175a5da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bbf8c49e1c4efce5bf93341c1ec862a"><td class="memItemLeft" align="right" valign="top">Status&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient.html#a4bbf8c49e1c4efce5bf93341c1ec862a">DeleteBackup</a> (<a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Backup.html">Backup</a> const &amp;backup)</td></tr>
<tr class="memdesc:a4bbf8c49e1c4efce5bf93341c1ec862a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes a pending or completed <a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Backup.html" title="This class identifies a Cloud Spanner Backup.">Backup</a>.  <a href="#a4bbf8c49e1c4efce5bf93341c1ec862a">More...</a><br /></td></tr>
<tr class="separator:a4bbf8c49e1c4efce5bf93341c1ec862a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a870252fa0cfc5026bf74836e849bba8b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacegoogle_1_1cloud_1_1spanner_1_1v0.html#a01a4fe37d2928eaf955bb0428706a585">ListBackupsRange</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient.html#a870252fa0cfc5026bf74836e849bba8b">ListBackups</a> (<a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Instance.html">Instance</a> in, std::string filter={})</td></tr>
<tr class="memdesc:a870252fa0cfc5026bf74836e849bba8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">List all the backups in a given project and instance that match the filter.  <a href="#a870252fa0cfc5026bf74836e849bba8b">More...</a><br /></td></tr>
<tr class="separator:a870252fa0cfc5026bf74836e849bba8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae46773edb7c197c937d8e006709f00a4"><td class="memItemLeft" align="right" valign="top">StatusOr&lt; google::spanner::admin::database::v1::Backup &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient.html#ae46773edb7c197c937d8e006709f00a4">UpdateBackupExpireTime</a> (google::spanner::admin::database::v1::Backup const &amp;backup, std::chrono::system_clock::time_point const &amp;expire_time)</td></tr>
<tr class="memdesc:ae46773edb7c197c937d8e006709f00a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update backup's <code>expire_time</code>.  <a href="#ae46773edb7c197c937d8e006709f00a4">More...</a><br /></td></tr>
<tr class="separator:ae46773edb7c197c937d8e006709f00a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0116a185e33da025ebdfd15fa0682099"><td class="memItemLeft" align="right" valign="top">StatusOr&lt; google::spanner::admin::database::v1::Backup &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient.html#a0116a185e33da025ebdfd15fa0682099">UpdateBackupExpireTime</a> (<a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Backup.html">Backup</a> const &amp;backup, std::chrono::system_clock::time_point const &amp;expire_time)</td></tr>
<tr class="memdesc:a0116a185e33da025ebdfd15fa0682099"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update backup's <code>expire_time</code>.  <a href="#a0116a185e33da025ebdfd15fa0682099">More...</a><br /></td></tr>
<tr class="separator:a0116a185e33da025ebdfd15fa0682099"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a723c49b608e5dde31c4882b616c1a206"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacegoogle_1_1cloud_1_1spanner_1_1v0.html#a0f7d620a489152e9b6f861b9b5c42e5b">ListBackupOperationsRange</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient.html#a723c49b608e5dde31c4882b616c1a206">ListBackupOperations</a> (<a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Instance.html">Instance</a> in, std::string filter={})</td></tr>
<tr class="memdesc:a723c49b608e5dde31c4882b616c1a206"><td class="mdescLeft">&#160;</td><td class="mdescRight">List all the backup operations in a given project and instance that match the filter.  <a href="#a723c49b608e5dde31c4882b616c1a206">More...</a><br /></td></tr>
<tr class="separator:a723c49b608e5dde31c4882b616c1a206"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7abc85fc756d203d7963cd3740960a34"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacegoogle_1_1cloud_1_1spanner_1_1v0.html#a4da9c6fb16f3e2f4083e72a9bd7d48b0">ListDatabaseOperationsRange</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient.html#a7abc85fc756d203d7963cd3740960a34">ListDatabaseOperations</a> (<a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Instance.html">Instance</a> in, std::string filter={})</td></tr>
<tr class="memdesc:a7abc85fc756d203d7963cd3740960a34"><td class="mdescLeft">&#160;</td><td class="mdescRight">List all the database operations in a given project and instance that match the filter.  <a href="#a7abc85fc756d203d7963cd3740960a34">More...</a><br /></td></tr>
<tr class="separator:a7abc85fc756d203d7963cd3740960a34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56ab3b13f17513c6c4fca01a4bc7ba7c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient.html#a56ab3b13f17513c6c4fca01a4bc7ba7c">DatabaseAdminClient</a> (std::shared_ptr&lt; <a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminConnection.html">DatabaseAdminConnection</a> &gt; c)</td></tr>
<tr class="memdesc:a56ab3b13f17513c6c4fca01a4bc7ba7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new client with the given stub. For testing only.  <a href="#a56ab3b13f17513c6c4fca01a4bc7ba7c">More...</a><br /></td></tr>
<tr class="separator:a56ab3b13f17513c6c4fca01a4bc7ba7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Performs database administration operations on Spanner. </p>
<p>Applications use this class to perform administrative operations on spanner <a href="https://cloud.google.com/spanner/docs/schema-and-data-model">Databases</a>.</p>
<dl class="section user"><dt>Performance</dt><dd></dd></dl>
<p>Creating a new <code><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient.html" title="Performs database administration operations on Spanner.">DatabaseAdminClient</a></code> is a relatively expensive operation, new objects establish new connections to the service. In contrast, copying or moving an existing <code><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient.html" title="Performs database administration operations on Spanner.">DatabaseAdminClient</a></code> object is a relatively cheap operation. Copied clients share the underlying resources.</p>
<dl class="section user"><dt>Thread Safety</dt><dd></dd></dl>
<p>Instances of this class created via copy-construction or copy-assignment share the underlying pool of connections. Access to these copies via multiple threads is guaranteed to work. Two threads operating on the same instance of this class is not guaranteed to work.</p>
<dl class="section user"><dt>Error Handling</dt><dd></dd></dl>
<p>This class uses <code>StatusOr&lt;T&gt;</code> to report errors. When an operation fails to perform its work the returned <code>StatusOr&lt;T&gt;</code> contains the error details. If the <code>ok()</code> member function in the <code>StatusOr&lt;T&gt;</code> returns <code>true</code> then it contains the expected result. Please consult the <a href="#google::cloud::v0::StatusOr"><code>StatusOr&lt;T&gt;</code> documentation</a> for more details.</p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span><a class="code" href="namespacegoogle_1_1cloud_1_1spanner.html">spanner</a> = ::google::cloud::spanner;</div><div class="line">using ::google::cloud::StatusOr;</div><div class="line">spanner::DatabaseAdminClient client = ...;</div><div class="line">StatusOr&lt;google::spanner::admin::database::v1::Database&gt; db =</div><div class="line">    client.CreateDatabase(...).get();</div><div class="line"></div><div class="line"><span class="keywordflow">if</span> (!db) {</div><div class="line">  std::cerr &lt;&lt; <span class="stringliteral">&quot;Error in CreateDatabase: &quot;</span> &lt;&lt; db.status() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line">  <span class="keywordflow">return</span>;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// Use `db` as a smart pointer here, e.g.:</span></div><div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;The database fully qualified name is: &quot;</span> &lt;&lt; db-&gt;name() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div></div><!-- fragment --><dl class="section user"><dt>Long running operations</dt><dd></dd></dl>
<p>Some operations in this class can take minutes to complete. In this case the class returns a <code>google::cloud::future&lt;StatusOr&lt;T&gt;&gt;</code>, the application can then poll the <code>future</code> or associate a callback to be invoked when the operation completes:</p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span><a class="code" href="namespacegoogle_1_1cloud_1_1spanner.html">spanner</a> = ::google::cloud::spanner;</div><div class="line">spanner::DatabaseAdminClient client = ...;</div><div class="line"><span class="comment">// Make example less verbose.</span></div><div class="line">using ::google::cloud::future;</div><div class="line">using ::google::cloud::StatusOr;</div><div class="line"><span class="keyword">using</span> std::chrono::chrono_literals; <span class="comment">// C++14</span></div><div class="line"></div><div class="line"><span class="keyword">auto</span> database = client.CreateDatabase(...);</div><div class="line"><span class="keywordflow">if</span> (database.wait_for(5m) == std::future_state::ready) {</div><div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Database created in under 5 minutes, yay!\n&quot;</span>;</div><div class="line">  <span class="keywordflow">return</span>;</div><div class="line">}</div><div class="line"><span class="comment">// Too slow, setup a callback instead:</span></div><div class="line">database.then([](<span class="keyword">auto</span> f) {</div><div class="line">  StatusOr&lt;google::spanner::admin::database::v1::Database&gt; db = f.get();</div><div class="line">  <span class="keywordflow">if</span> (!db) {</div><div class="line">      std::cout &lt;&lt; <span class="stringliteral">&quot;Failed creating a database!\n&quot;</span>;</div><div class="line">      <span class="keywordflow">return</span>;</div><div class="line">  }</div><div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Database created!\n&quot;</span>;</div><div class="line">});</div></div><!-- fragment --> 
<p class="definition">Definition at line <a class="el" href="database__admin__client_8h_source.html#l00111">111</a> of file <a class="el" href="database__admin__client_8h_source.html">database_admin_client.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a5359f2621faada447be80416df5e2eba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5359f2621faada447be80416df5e2eba">&#9670;&nbsp;</a></span>DatabaseAdminClient() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">google::cloud::spanner::v0::DatabaseAdminClient::DatabaseAdminClient </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacegoogle_1_1cloud_1_1spanner_1_1v0.html#a961720bcfc703bd430b89359180eb1c3">ConnectionOptions</a> const &amp;&#160;</td>
          <td class="paramname"><em>options</em> = <code><a class="el" href="namespacegoogle_1_1cloud_1_1spanner_1_1v0.html#a961720bcfc703bd430b89359180eb1c3">ConnectionOptions</a>()</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="database__admin__client_8cc_source.html#l00026">26</a> of file <a class="el" href="database__admin__client_8cc_source.html">database_admin_client.cc</a>.</p>

</div>
</div>
<a id="a56ab3b13f17513c6c4fca01a4bc7ba7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56ab3b13f17513c6c4fca01a4bc7ba7c">&#9670;&nbsp;</a></span>DatabaseAdminClient() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">google::cloud::spanner::v0::DatabaseAdminClient::DatabaseAdminClient </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminConnection.html">DatabaseAdminConnection</a> &gt;&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a new client with the given stub. For testing only. </p>

<p class="definition">Definition at line <a class="el" href="database__admin__client_8h_source.html#l00506">506</a> of file <a class="el" href="database__admin__client_8h_source.html">database_admin_client.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a783685d0a574302ff3122ca20c0165ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a783685d0a574302ff3122ca20c0165ee">&#9670;&nbsp;</a></span>CreateBackup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">future&lt; StatusOr&lt; gcsa::Backup &gt; &gt; google::cloud::spanner::v0::DatabaseAdminClient::CreateBackup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Database.html">Database</a>&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>backup_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::chrono::system_clock::time_point&#160;</td>
          <td class="paramname"><em>expire_time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a new Cloud Spanner backup for the given database. </p>
<dl class="section user"><dt>Idempotency</dt><dd>This is not an idempotent operation. Transient failures are not retried.</dd></dl>
<p>This function creates a database backup for the given Google Cloud Spanner database.</p>
<p>Note that the backup id must be unique within the same instance, it must be between 2 and 60 characters long, it must start with a lowercase letter (<code>[a-z]</code>), it must end with a lowercase letter or a number (<code>[a-z0-9]</code>) and any characters between the beginning and ending characters must be lower case letters, numbers, underscore (<code>_</code>) or dashes (<code>-</code>), that is, they must belong to the <code>[a-z0-9_-]</code> character set.</p>
<p>The <code>expire_time</code> must be at least 6 hours and at most 366 days from the time the <code><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient.html#a783685d0a574302ff3122ca20c0165ee" title="Creates a new Cloud Spanner backup for the given database.">CreateBackup()</a></code> request is processed.</p>
<dl class="section return"><dt>Returns</dt><dd>A <code>google::cloud::future</code> that becomes satisfied when the operation completes on the service. Note that this can take minutes in some cases.</dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient.html#a783685d0a574302ff3122ca20c0165ee">CreateBackup</a>(google::cloud::spanner::DatabaseAdminClient client,</div><div class="line">                  std::string <span class="keyword">const</span>&amp; project_id, std::string <span class="keyword">const</span>&amp; instance_id,</div><div class="line">                  std::string <span class="keyword">const</span>&amp; database_id,</div><div class="line">                  std::string <span class="keyword">const</span>&amp; backup_id) {</div><div class="line">  using ::google::cloud::future;</div><div class="line">  using ::google::cloud::StatusOr;</div><div class="line">  google::cloud::spanner::Database database(project_id, instance_id,</div><div class="line">                                            database_id);</div><div class="line">  <span class="keyword">auto</span> backup = client</div><div class="line">                    .CreateBackup(database, backup_id,</div><div class="line">                                  std::chrono::system_clock::now() +</div><div class="line">                                      std::chrono::hours(7))</div><div class="line">                    .get();</div><div class="line">  <span class="keywordflow">if</span> (!backup.ok()) <span class="keywordflow">throw</span> std::runtime_error(backup.status().message());</div><div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Backup &#39;&quot;</span> &lt;&lt; backup-&gt;name() &lt;&lt; <span class="stringliteral">&quot;&#39; of size &quot;</span></div><div class="line">            &lt;&lt; backup-&gt;size_bytes() &lt;&lt; <span class="stringliteral">&quot; bytes was created at &quot;</span></div><div class="line">            &lt;&lt; google::protobuf::util::TimeUtil::ToString(backup-&gt;create_time())</div><div class="line">            &lt;&lt; <span class="stringliteral">&quot;.\n&quot;</span>;</div><div class="line">}</div></div><!-- fragment --></dd></dl>

<p class="definition">Definition at line <a class="el" href="database__admin__client_8cc_source.html#l00131">131</a> of file <a class="el" href="database__admin__client_8cc_source.html">database_admin_client.cc</a>.</p>

</div>
</div>
<a id="af19c5d53e7f32bba140cd74fdf4dfe05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af19c5d53e7f32bba140cd74fdf4dfe05">&#9670;&nbsp;</a></span>CreateDatabase()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">future&lt; StatusOr&lt; gcsa::Database &gt; &gt; google::cloud::spanner::v0::DatabaseAdminClient::CreateDatabase </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Database.html">Database</a>&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::string &gt;&#160;</td>
          <td class="paramname"><em>extra_statements</em> = <code>{}</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a new Cloud Spanner database in the given project and instance. </p>
<p>This function creates a database (using the "CREATE DATABASE" DDL statement) in the given Google Cloud Project and Cloud Spanner instance. The application can provide an optional list of additional DDL statements to atomically create tables and indices as well as the new database.</p>
<p>Note that the database id must be between 2 and 30 characters long, it must start with a lowercase letter (<code>[a-z]</code>), it must end with a lowercase letter or a number (<code>[a-z0-9]</code>) and any characters between the beginning and ending characters must be lower case letters, numbers, underscore (<code>_</code>) or dashes (<code>-</code>), that is, they must belong to the <code>[a-z0-9_-]</code> character set.</p>
<dl class="section return"><dt>Returns</dt><dd>A <code>google::cloud::future</code> that becomes satisfied when the operation completes on the service. Note that this can take minutes in some cases.</dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient.html#af19c5d53e7f32bba140cd74fdf4dfe05">CreateDatabase</a>(google::cloud::spanner::DatabaseAdminClient client,</div><div class="line">                    std::string <span class="keyword">const</span>&amp; project_id,</div><div class="line">                    std::string <span class="keyword">const</span>&amp; instance_id,</div><div class="line">                    std::string <span class="keyword">const</span>&amp; database_id) {</div><div class="line">  using ::google::cloud::future;</div><div class="line">  using ::google::cloud::StatusOr;</div><div class="line">  google::cloud::spanner::Database database(project_id, instance_id,</div><div class="line">                                            database_id);</div><div class="line">  future&lt;StatusOr&lt;google::spanner::admin::database::v1::Database&gt;&gt; f =</div><div class="line">      client.CreateDatabase(database, {R<span class="stringliteral">&quot;&quot;&quot;(</span></div><div class="line"><span class="stringliteral">          CREATE TABLE Singers (</span></div><div class="line"><span class="stringliteral">              SingerId   INT64 NOT NULL,</span></div><div class="line"><span class="stringliteral">              FirstName  STRING(1024),</span></div><div class="line"><span class="stringliteral">              LastName   STRING(1024),</span></div><div class="line"><span class="stringliteral">              SingerInfo BYTES(MAX)</span></div><div class="line"><span class="stringliteral">          ) PRIMARY KEY (SingerId))&quot;&quot;&quot;,</span></div><div class="line"><span class="stringliteral">                                       R</span><span class="stringliteral">&quot;&quot;&quot;(</span></div><div class="line"><span class="stringliteral">          CREATE TABLE Albums (</span></div><div class="line"><span class="stringliteral">              SingerId     INT64 NOT NULL,</span></div><div class="line"><span class="stringliteral">              AlbumId      INT64 NOT NULL,</span></div><div class="line"><span class="stringliteral">              AlbumTitle   STRING(MAX)</span></div><div class="line"><span class="stringliteral">          ) PRIMARY KEY (SingerId, AlbumId),</span></div><div class="line"><span class="stringliteral">              INTERLEAVE IN PARENT Singers ON DELETE CASCADE)&quot;&quot;&quot;});</span></div><div class="line"><span class="stringliteral">  StatusOr&lt;google::spanner::admin::database::v1::Database&gt; db = f.get();</span></div><div class="line"><span class="stringliteral">  </span><span class="keywordflow">if</span> (!db) <span class="keywordflow">throw</span> std::runtime_error(db.status().message());</div><div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Created database [&quot;</span> &lt;&lt; database &lt;&lt; <span class="stringliteral">&quot;]\n&quot;</span>;</div><div class="line">}</div></div><!-- fragment --> </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a href="https://cloud.google.com/spanner/docs/data-definition-language">https://cloud.google.com/spanner/docs/data-definition-language</a> for a full list of the DDL operations</dd>
<dd>
<a href="https://cloud.google.com/spanner/docs/data-definition-language#create_database">https://cloud.google.com/spanner/docs/data-definition-language#create_database</a> for the regular expression that must be satisfied by the database id. </dd></dl>

<p class="definition">Definition at line <a class="el" href="database__admin__client_8cc_source.html#l00029">29</a> of file <a class="el" href="database__admin__client_8cc_source.html">database_admin_client.cc</a>.</p>

</div>
</div>
<a id="ab85b26bda200ae3673d3555c2175a5da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab85b26bda200ae3673d3555c2175a5da">&#9670;&nbsp;</a></span>DeleteBackup() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Status google::cloud::spanner::v0::DatabaseAdminClient::DeleteBackup </td>
          <td>(</td>
          <td class="paramtype">google::spanner::admin::database::v1::Backup const &amp;&#160;</td>
          <td class="paramname"><em>backup</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes a pending or completed <a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Backup.html" title="This class identifies a Cloud Spanner Backup.">Backup</a>. </p>
<dl class="section user"><dt>Idempotency</dt><dd>We treat this operation as idempotent. Transient failures are automatically retried. </dd></dl>

<p class="definition">Definition at line <a class="el" href="database__admin__client_8cc_source.html#l00142">142</a> of file <a class="el" href="database__admin__client_8cc_source.html">database_admin_client.cc</a>.</p>

</div>
</div>
<a id="a4bbf8c49e1c4efce5bf93341c1ec862a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4bbf8c49e1c4efce5bf93341c1ec862a">&#9670;&nbsp;</a></span>DeleteBackup() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Status google::cloud::spanner::v0::DatabaseAdminClient::DeleteBackup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Backup.html">Backup</a> const &amp;&#160;</td>
          <td class="paramname"><em>backup</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes a pending or completed <a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Backup.html" title="This class identifies a Cloud Spanner Backup.">Backup</a>. </p>
<dl class="section user"><dt>Idempotency</dt><dd>We treat this operation as idempotent. Transient failures are automatically retried.</dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient.html#ab85b26bda200ae3673d3555c2175a5da">DeleteBackup</a>(google::cloud::spanner::DatabaseAdminClient client,</div><div class="line">                  std::string <span class="keyword">const</span>&amp; project_id, std::string <span class="keyword">const</span>&amp; instance_id,</div><div class="line">                  std::string <span class="keyword">const</span>&amp; backup_id) {</div><div class="line">  using ::google::cloud::Status;</div><div class="line">  google::cloud::spanner::Backup backup(</div><div class="line">      google::cloud::spanner::Instance(project_id, instance_id), backup_id);</div><div class="line">  Status status = client.DeleteBackup(backup);</div><div class="line">  <span class="keywordflow">if</span> (!status.ok()) <span class="keywordflow">throw</span> std::runtime_error(status.message());</div><div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Backup &#39;&quot;</span> &lt;&lt; backup.FullName() &lt;&lt; <span class="stringliteral">&quot;&#39; was deleted.\n&quot;</span>;</div><div class="line">}</div></div><!-- fragment --></dd></dl>

<p class="definition">Definition at line <a class="el" href="database__admin__client_8cc_source.html#l00147">147</a> of file <a class="el" href="database__admin__client_8cc_source.html">database_admin_client.cc</a>.</p>

</div>
</div>
<a id="ab3443f1da6c949d195ac76b7ed6776c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3443f1da6c949d195ac76b7ed6776c4">&#9670;&nbsp;</a></span>DropDatabase()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Status google::cloud::spanner::v0::DatabaseAdminClient::DropDatabase </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Database.html">Database</a>&#160;</td>
          <td class="paramname"><em>db</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Drops (deletes) an existing Cloud Spanner database. </p>
<dl class="section warning"><dt>Warning</dt><dd>Dropping a database deletes all the tables and other data in the database. This is an unrecoverable operation.</dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient.html#ab3443f1da6c949d195ac76b7ed6776c4">DropDatabase</a>(google::cloud::spanner::DatabaseAdminClient client,</div><div class="line">                  std::string <span class="keyword">const</span>&amp; project_id, std::string <span class="keyword">const</span>&amp; instance_id,</div><div class="line">                  std::string <span class="keyword">const</span>&amp; database_id) {</div><div class="line">  google::cloud::spanner::Database database(project_id, instance_id,</div><div class="line">                                            database_id);</div><div class="line">  google::cloud::Status status = client.DropDatabase(database);</div><div class="line">  <span class="keywordflow">if</span> (!status.ok()) <span class="keywordflow">throw</span> std::runtime_error(status.message());</div><div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Database &quot;</span> &lt;&lt; database &lt;&lt; <span class="stringliteral">&quot; successfully dropped\n&quot;</span>;</div><div class="line">}</div></div><!-- fragment --></dd></dl>

<p class="definition">Definition at line <a class="el" href="database__admin__client_8cc_source.html#l00053">53</a> of file <a class="el" href="database__admin__client_8cc_source.html">database_admin_client.cc</a>.</p>

</div>
</div>
<a id="a14230c812dce088ae3f62161cface71a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14230c812dce088ae3f62161cface71a">&#9670;&nbsp;</a></span>GetBackup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">StatusOr&lt; gcsa::Backup &gt; google::cloud::spanner::v0::DatabaseAdminClient::GetBackup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Backup.html">Backup</a> const &amp;&#160;</td>
          <td class="paramname"><em>backup</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve metadata information about a <a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Backup.html" title="This class identifies a Cloud Spanner Backup.">Backup</a>. </p>
<dl class="section user"><dt>Idempotency</dt><dd>This is a read-only operation and therefore always idempotent. Transient failures are automatically retried.</dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient.html#a14230c812dce088ae3f62161cface71a">GetBackup</a>(google::cloud::spanner::DatabaseAdminClient client,</div><div class="line">               std::string <span class="keyword">const</span>&amp; project_id, std::string <span class="keyword">const</span>&amp; instance_id,</div><div class="line">               std::string <span class="keyword">const</span>&amp; backup_id) {</div><div class="line">  using ::google::cloud::StatusOr;</div><div class="line">  google::cloud::spanner::Backup backup_name(</div><div class="line">      google::cloud::spanner::Instance(project_id, instance_id), backup_id);</div><div class="line">  <span class="keyword">auto</span> backup = client.GetBackup(backup_name);</div><div class="line">  <span class="keywordflow">if</span> (!backup.ok()) <span class="keywordflow">throw</span> std::runtime_error(backup.status().message());</div><div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Backup &#39;&quot;</span> &lt;&lt; backup-&gt;name() &lt;&lt; <span class="stringliteral">&quot;&#39; of size &quot;</span></div><div class="line">            &lt;&lt; backup-&gt;size_bytes() &lt;&lt; <span class="stringliteral">&quot; bytes was created at &quot;</span></div><div class="line">            &lt;&lt; google::protobuf::util::TimeUtil::ToString(backup-&gt;create_time())</div><div class="line">            &lt;&lt; <span class="stringliteral">&quot;.\n&quot;</span>;</div><div class="line">}</div></div><!-- fragment --></dd></dl>

<p class="definition">Definition at line <a class="el" href="database__admin__client_8cc_source.html#l00138">138</a> of file <a class="el" href="database__admin__client_8cc_source.html">database_admin_client.cc</a>.</p>

</div>
</div>
<a id="a9f4ce7fb02cbbede35467247c5b42b00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f4ce7fb02cbbede35467247c5b42b00">&#9670;&nbsp;</a></span>GetDatabase()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">StatusOr&lt; gcsa::Database &gt; google::cloud::spanner::v0::DatabaseAdminClient::GetDatabase </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Database.html">Database</a>&#160;</td>
          <td class="paramname"><em>db</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve metadata information about a database. </p>
<dl class="section user"><dt>Idempotency</dt><dd>This is a read-only operation and therefore always idempotent. Transient failures are automatically retried.</dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient.html#a9f4ce7fb02cbbede35467247c5b42b00">GetDatabase</a>(google::cloud::spanner::DatabaseAdminClient client,</div><div class="line">                 std::string <span class="keyword">const</span>&amp; project_id, std::string <span class="keyword">const</span>&amp; instance_id,</div><div class="line">                 std::string <span class="keyword">const</span>&amp; database_id) {</div><div class="line">  <span class="keyword">namespace </span><a class="code" href="namespacegoogle_1_1cloud_1_1spanner.html">spanner</a> = ::google::cloud::spanner;</div><div class="line">  <span class="keyword">auto</span> database = client.GetDatabase(</div><div class="line">      spanner::Database(project_id, instance_id, database_id));</div><div class="line">  <span class="keywordflow">if</span> (!database) <span class="keywordflow">throw</span> std::runtime_error(database.status().message());</div><div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Database metadata is:\n&quot;</span> &lt;&lt; database-&gt;DebugString() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line">}</div></div><!-- fragment --></dd></dl>

<p class="definition">Definition at line <a class="el" href="database__admin__client_8cc_source.html#l00034">34</a> of file <a class="el" href="database__admin__client_8cc_source.html">database_admin_client.cc</a>.</p>

</div>
</div>
<a id="a75e7f11200ee24f0fb26b63972b0869f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75e7f11200ee24f0fb26b63972b0869f">&#9670;&nbsp;</a></span>GetDatabaseDdl()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">StatusOr&lt; gcsa::GetDatabaseDdlResponse &gt; google::cloud::spanner::v0::DatabaseAdminClient::GetDatabaseDdl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Database.html">Database</a>&#160;</td>
          <td class="paramname"><em>db</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve a database schema. </p>
<dl class="section user"><dt>Idempotency</dt><dd>This is a read-only operation and therefore always idempotent. Transient failures are automatically retried.</dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient.html#a75e7f11200ee24f0fb26b63972b0869f">GetDatabaseDdl</a>(google::cloud::spanner::DatabaseAdminClient client,</div><div class="line">                    std::string <span class="keyword">const</span>&amp; project_id,</div><div class="line">                    std::string <span class="keyword">const</span>&amp; instance_id,</div><div class="line">                    std::string <span class="keyword">const</span>&amp; database_id) {</div><div class="line">  <span class="keyword">namespace </span><a class="code" href="namespacegoogle_1_1cloud_1_1spanner.html">spanner</a> = ::google::cloud::spanner;</div><div class="line">  <span class="keyword">auto</span> database = client.GetDatabaseDdl(</div><div class="line">      spanner::Database(project_id, instance_id, database_id));</div><div class="line">  <span class="keywordflow">if</span> (!database) <span class="keywordflow">throw</span> std::runtime_error(database.status().message());</div><div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Database metadata is:\n&quot;</span> &lt;&lt; database-&gt;DebugString() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line">}</div></div><!-- fragment --></dd></dl>

<p class="definition">Definition at line <a class="el" href="database__admin__client_8cc_source.html#l00038">38</a> of file <a class="el" href="database__admin__client_8cc_source.html">database_admin_client.cc</a>.</p>

</div>
</div>
<a id="a18fff0d95cb3a597746ae6253c7dbc24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18fff0d95cb3a597746ae6253c7dbc24">&#9670;&nbsp;</a></span>GetIamPolicy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">StatusOr&lt; google::iam::v1::Policy &gt; google::cloud::spanner::v0::DatabaseAdminClient::GetIamPolicy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Database.html">Database</a>&#160;</td>
          <td class="paramname"><em>db</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the IAM policy for a database. </p>
<dl class="section user"><dt>Idempotency</dt><dd>This operation is read-only and therefore always idempotent.</dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><span class="keywordtype">void</span> DatabaseGetIamPolicy(google::cloud::spanner::DatabaseAdminClient client,</div><div class="line">                          std::string <span class="keyword">const</span>&amp; project_id,</div><div class="line">                          std::string <span class="keyword">const</span>&amp; instance_id,</div><div class="line">                          std::string <span class="keyword">const</span>&amp; database_id) {</div><div class="line">  google::cloud::spanner::Database database(project_id, instance_id,</div><div class="line">                                            database_id);</div><div class="line">  <span class="keyword">auto</span> actual = client.GetIamPolicy(database);</div><div class="line">  <span class="keywordflow">if</span> (!actual) <span class="keywordflow">throw</span> std::runtime_error(actual.status().message());</div><div class="line"></div><div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;The IAM policy for database &quot;</span> &lt;&lt; database_id &lt;&lt; <span class="stringliteral">&quot; is:\n&quot;</span></div><div class="line">            &lt;&lt; actual-&gt;DebugString() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line">}</div></div><!-- fragment --></dd></dl>

<p class="definition">Definition at line <a class="el" href="database__admin__client_8cc_source.html#l00067">67</a> of file <a class="el" href="database__admin__client_8cc_source.html">database_admin_client.cc</a>.</p>

</div>
</div>
<a id="a723c49b608e5dde31c4882b616c1a206"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a723c49b608e5dde31c4882b616c1a206">&#9670;&nbsp;</a></span>ListBackupOperations()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacegoogle_1_1cloud_1_1spanner_1_1v0.html#a0f7d620a489152e9b6f861b9b5c42e5b">ListBackupOperationsRange</a> google::cloud::spanner::v0::DatabaseAdminClient::ListBackupOperations </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Instance.html">Instance</a>&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>filter</em> = <code>{}</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>List all the backup operations in a given project and instance that match the filter. </p>
<dl class="section user"><dt>Idempotency</dt><dd>This operation is read-only and therefore always idempotent.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">in</td><td>An instance where the backup operations belong to. </td></tr>
    <tr><td class="paramname">filter</td><td>A filter expression that filters what operations are returned in the response. See <a href="https://cloud.google.com/spanner/docs/reference/rpc/google.spanner.admin.database.v1#google.spanner.admin.database.v1.ListBackupOperationsRequest">this documentation</a> for the syntax of the filter expression.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient.html#a723c49b608e5dde31c4882b616c1a206">ListBackupOperations</a>(google::cloud::spanner::DatabaseAdminClient client,</div><div class="line">                          std::string <span class="keyword">const</span>&amp; project_id,</div><div class="line">                          std::string <span class="keyword">const</span>&amp; instance_id,</div><div class="line">                          std::string <span class="keyword">const</span>&amp; database_id) {</div><div class="line">  google::cloud::spanner::Instance in(project_id, instance_id);</div><div class="line">  <span class="keyword">auto</span> filter = std::string(<span class="stringliteral">&quot;(metadata.database:&quot;</span>) + database_id + <span class="stringliteral">&quot;) AND &quot;</span> +</div><div class="line">                <span class="stringliteral">&quot;(metadata.@type:type.googleapis.com/&quot;</span> +</div><div class="line">                <span class="stringliteral">&quot;google.spanner.admin.database.v1.CreateBackupMetadata)&quot;</span>;</div><div class="line">  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; operation : client.ListBackupOperations(in, filter)) {</div><div class="line">    <span class="keywordflow">if</span> (!operation) {</div><div class="line">      <span class="keywordflow">throw</span> std::runtime_error(operation.status().message());</div><div class="line">    }</div><div class="line">    google::spanner::admin::database::v1::CreateBackupMetadata metadata;</div><div class="line">    operation-&gt;metadata().UnpackTo(&amp;metadata);</div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Backup &quot;</span> &lt;&lt; metadata.name() &lt;&lt; <span class="stringliteral">&quot; on database &quot;</span></div><div class="line">              &lt;&lt; metadata.database()</div><div class="line">              &lt;&lt; <span class="stringliteral">&quot; progress: &quot;</span> &lt;&lt; metadata.progress().progress_percent()</div><div class="line">              &lt;&lt; <span class="stringliteral">&quot;% complete.&quot;</span>;</div><div class="line">  }</div><div class="line">}</div></div><!-- fragment --></dd></dl>

<p class="definition">Definition at line <a class="el" href="database__admin__client_8cc_source.html#l00186">186</a> of file <a class="el" href="database__admin__client_8cc_source.html">database_admin_client.cc</a>.</p>

</div>
</div>
<a id="a870252fa0cfc5026bf74836e849bba8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a870252fa0cfc5026bf74836e849bba8b">&#9670;&nbsp;</a></span>ListBackups()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacegoogle_1_1cloud_1_1spanner_1_1v0.html#a01a4fe37d2928eaf955bb0428706a585">ListBackupsRange</a> google::cloud::spanner::v0::DatabaseAdminClient::ListBackups </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Instance.html">Instance</a>&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>filter</em> = <code>{}</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>List all the backups in a given project and instance that match the filter. </p>
<dl class="section user"><dt>Idempotency</dt><dd>This operation is read-only and therefore always idempotent.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">in</td><td>An instance where the backup operations belong to. </td></tr>
    <tr><td class="paramname">filter</td><td>A filter expression that filters backups listed in the response. See <a href="https://cloud.google.com/spanner/docs/reference/rpc/google.spanner.admin.database.v1#google.spanner.admin.database.v1.ListBackupsRequest">this documentation</a> for the syntax of the filter expression.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient.html#a870252fa0cfc5026bf74836e849bba8b">ListBackups</a>(google::cloud::spanner::DatabaseAdminClient client,</div><div class="line">                 std::string <span class="keyword">const</span>&amp; project_id,</div><div class="line">                 std::string <span class="keyword">const</span>&amp; instance_id) {</div><div class="line">  google::cloud::spanner::Instance in(project_id, instance_id);</div><div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;All backups:\n&quot;</span>;</div><div class="line">  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; backup : client.ListBackups(in)) {</div><div class="line">    <span class="keywordflow">if</span> (!backup) {</div><div class="line">      <span class="keywordflow">throw</span> std::runtime_error(backup.status().message());</div><div class="line">    }</div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Backup &quot;</span> &lt;&lt; backup-&gt;name() &lt;&lt; <span class="stringliteral">&quot; on database &quot;</span></div><div class="line">              &lt;&lt; backup-&gt;database() &lt;&lt; <span class="stringliteral">&quot; with size : &quot;</span> &lt;&lt; backup-&gt;size_bytes()</div><div class="line">              &lt;&lt; <span class="stringliteral">&quot; bytes.\n&quot;</span>;</div><div class="line">  }</div><div class="line">}</div></div><!-- fragment --></dd></dl>

<p class="definition">Definition at line <a class="el" href="database__admin__client_8cc_source.html#l00151">151</a> of file <a class="el" href="database__admin__client_8cc_source.html">database_admin_client.cc</a>.</p>

</div>
</div>
<a id="a7abc85fc756d203d7963cd3740960a34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7abc85fc756d203d7963cd3740960a34">&#9670;&nbsp;</a></span>ListDatabaseOperations()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacegoogle_1_1cloud_1_1spanner_1_1v0.html#a4da9c6fb16f3e2f4083e72a9bd7d48b0">ListDatabaseOperationsRange</a> google::cloud::spanner::v0::DatabaseAdminClient::ListDatabaseOperations </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Instance.html">Instance</a>&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>filter</em> = <code>{}</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>List all the database operations in a given project and instance that match the filter. </p>
<dl class="section user"><dt>Idempotency</dt><dd>This operation is read-only and therefore always idempotent.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">in</td><td>An instance where the database operations belong to. </td></tr>
    <tr><td class="paramname">filter</td><td>A filter expression that filters what operations are returned in the response. See <a href="https://cloud.google.com/spanner/docs/reference/rpc/google.spanner.admin.database.v1#google.spanner.admin.database.v1.ListDatabaseOperationsRequest">this documentation</a> for the syntax of the filter expression.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient.html#a7abc85fc756d203d7963cd3740960a34">ListDatabaseOperations</a>(google::cloud::spanner::DatabaseAdminClient client,</div><div class="line">                            std::string <span class="keyword">const</span>&amp; project_id,</div><div class="line">                            std::string <span class="keyword">const</span>&amp; instance_id) {</div><div class="line">  google::cloud::spanner::Instance in(project_id, instance_id);</div><div class="line">  <span class="keyword">auto</span> filter = std::string(</div><div class="line">      <span class="stringliteral">&quot;(metadata.@type:type.googleapis.com/&quot;</span></div><div class="line">      <span class="stringliteral">&quot;google.spanner.admin.database.v1.OptimizeRestoredDatabaseMetadata)&quot;</span>);</div><div class="line">  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; operation : client.ListDatabaseOperations(in, filter)) {</div><div class="line">    <span class="keywordflow">if</span> (!operation) {</div><div class="line">      <span class="keywordflow">throw</span> std::runtime_error(operation.status().message());</div><div class="line">    }</div><div class="line">    google::spanner::admin::database::v1::OptimizeRestoredDatabaseMetadata</div><div class="line">        metadata;</div><div class="line">    operation-&gt;metadata().UnpackTo(&amp;metadata);</div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Database &quot;</span> &lt;&lt; metadata.name() &lt;&lt; <span class="stringliteral">&quot; restored from backup is &quot;</span></div><div class="line">              &lt;&lt; metadata.progress().progress_percent() &lt;&lt; <span class="stringliteral">&quot;% optimized.&quot;</span>;</div><div class="line">  }</div><div class="line">}</div></div><!-- fragment --></dd></dl>

<p class="definition">Definition at line <a class="el" href="database__admin__client_8cc_source.html#l00191">191</a> of file <a class="el" href="database__admin__client_8cc_source.html">database_admin_client.cc</a>.</p>

</div>
</div>
<a id="ae787f480f6b2ecc3bee04c2b23428390"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae787f480f6b2ecc3bee04c2b23428390">&#9670;&nbsp;</a></span>ListDatabases()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacegoogle_1_1cloud_1_1spanner_1_1v0.html#a26da85a6c1543ac1cabbb504cf6da973">ListDatabaseRange</a> google::cloud::spanner::v0::DatabaseAdminClient::ListDatabases </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Instance.html">Instance</a>&#160;</td>
          <td class="paramname"><em>in</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>List all the databases in a give project and instance. </p>
<dl class="section user"><dt>Idempotency</dt><dd>This operation is read-only and therefore always idempotent.</dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient.html#ae787f480f6b2ecc3bee04c2b23428390">ListDatabases</a>(google::cloud::spanner::DatabaseAdminClient client,</div><div class="line">                   std::string <span class="keyword">const</span>&amp; project_id,</div><div class="line">                   std::string <span class="keyword">const</span>&amp; instance_id) {</div><div class="line">  google::cloud::spanner::Instance in(project_id, instance_id);</div><div class="line">  <span class="keywordtype">int</span> count = 0;</div><div class="line">  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; database : client.ListDatabases(in)) {</div><div class="line">    <span class="keywordflow">if</span> (!database) <span class="keywordflow">throw</span> std::runtime_error(database.status().message());</div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Database &quot;</span> &lt;&lt; database-&gt;name() &lt;&lt; <span class="stringliteral">&quot; full metadata:\n&quot;</span></div><div class="line">              &lt;&lt; database-&gt;DebugString() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line">    ++count;</div><div class="line">  }</div><div class="line">  <span class="keywordflow">if</span> (count == 0) {</div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;No databases found in instance &quot;</span> &lt;&lt; instance_id</div><div class="line">              &lt;&lt; <span class="stringliteral">&quot; for project &lt;&lt; &quot;</span> &lt;&lt; project_id &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line">  }</div><div class="line">}</div></div><!-- fragment --></dd></dl>

<p class="definition">Definition at line <a class="el" href="database__admin__client_8cc_source.html#l00049">49</a> of file <a class="el" href="database__admin__client_8cc_source.html">database_admin_client.cc</a>.</p>

</div>
</div>
<a id="add59d6662b3c8b61d1a2a7e9c75fe42f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add59d6662b3c8b61d1a2a7e9c75fe42f">&#9670;&nbsp;</a></span>RestoreDatabase() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">future&lt; StatusOr&lt; gcsa::Database &gt; &gt; google::cloud::spanner::v0::DatabaseAdminClient::RestoreDatabase </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Database.html">Database</a>&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Backup.html">Backup</a> const &amp;&#160;</td>
          <td class="paramname"><em>backup</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new database by restoring from a completed backup. </p>
<dl class="section user"><dt>Idempotency</dt><dd>This is not an idempotent operation. Transient failures are not retried.</dd></dl>
<p>The new database must be in the same project and in an instance with the same instance configuration as the instance containing the backup.</p>
<dl class="section return"><dt>Returns</dt><dd>A <code>google::cloud::future</code> that becomes satisfied when the operation completes on the service. Note that this can take minutes in some cases.</dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1DatabaseAdminClient.html#add59d6662b3c8b61d1a2a7e9c75fe42f">RestoreDatabase</a>(google::cloud::spanner::DatabaseAdminClient client,</div><div class="line">                     std::string <span class="keyword">const</span>&amp; project_id,</div><div class="line">                     std::string <span class="keyword">const</span>&amp; instance_id,</div><div class="line">                     std::string <span class="keyword">const</span>&amp; database_id,</div><div class="line">                     std::string <span class="keyword">const</span>&amp; backup_id) {</div><div class="line">  using ::google::cloud::future;</div><div class="line">  using ::google::cloud::StatusOr;</div><div class="line">  google::cloud::spanner::Database database(project_id, instance_id,</div><div class="line">                                            database_id);</div><div class="line">  google::cloud::spanner::Backup backup(</div><div class="line">      google::cloud::spanner::Instance(project_id, instance_id), backup_id);</div><div class="line">  <span class="keyword">auto</span> restored_db = client.RestoreDatabase(database, backup).get();</div><div class="line">  <span class="keywordflow">if</span> (!restored_db.ok())</div><div class="line">    <span class="keywordflow">throw</span> std::runtime_error(restored_db.status().message());</div><div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Database &#39;&quot;</span> &lt;&lt; restored_db-&gt;name() &lt;&lt; <span class="stringliteral">&quot;&#39; was restored from &quot;</span></div><div class="line">            &lt;&lt; <span class="stringliteral">&quot; backup &#39;&quot;</span> &lt;&lt; backup.FullName() &lt;&lt; <span class="stringliteral">&quot;&#39;.\n&quot;</span>;</div><div class="line">}</div></div><!-- fragment --></dd></dl>

<p class="definition">Definition at line <a class="el" href="database__admin__client_8cc_source.html#l00057">57</a> of file <a class="el" href="database__admin__client_8cc_source.html">database_admin_client.cc</a>.</p>

</div>
</div>
<a id="ae7c74ceaadeacdda81146714503a9852"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7c74ceaadeacdda81146714503a9852">&#9670;&nbsp;</a></span>RestoreDatabase() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">future&lt; StatusOr&lt; gcsa::Database &gt; &gt; google::cloud::spanner::v0::DatabaseAdminClient::RestoreDatabase </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Database.html">Database</a>&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">google::spanner::admin::database::v1::Backup const &amp;&#160;</td>
          <td class="paramname"><em>backup</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new database by restoring from a completed backup. </p>
<dl class="section user"><dt>Idempotency</dt><dd>This is not an idempotent operation. Transient failures are not retried.</dd></dl>
<p>The new database must be in the same project and in an instance with the same instance configuration as the instance containing the backup.</p>
<dl class="section return"><dt>Returns</dt><dd>A <code>google::cloud::future</code> that becomes satisfied when the operation completes on the service. Note that this can take minutes in some cases. </dd></dl>

<p class="definition">Definition at line <a class="el" href="database__admin__client_8cc_source.html#l00062">62</a> of file <a class="el" href="database__admin__client_8cc_source.html">database_admin_client.cc</a>.</p>

</div>
</div>
<a id="af8f5a36a409bf2f0161fdf37488a7d8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8f5a36a409bf2f0161fdf37488a7d8d">&#9670;&nbsp;</a></span>SetIamPolicy() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">StatusOr&lt; google::iam::v1::Policy &gt; google::cloud::spanner::v0::DatabaseAdminClient::SetIamPolicy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Database.html">Database</a>&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">google::iam::v1::Policy&#160;</td>
          <td class="paramname"><em>policy</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the IAM policy for the given database. </p>
<p>This function changes the IAM policy configured in the given database to the value of <code>policy</code>.</p>
<dl class="section user"><dt>Idempotency</dt><dd>This function is only idempotent if the <code>etag</code> field in <code>policy</code> is set. Therefore, the underlying RPCs are only retried if the field is set, and the function returns the first RPC error in any other case.</dd></dl>
<dl class="section see"><dt>See also</dt><dd>The <a href="https://cloud.google.com/spanner/docs/iam">Cloud Spanner documentation</a> for a description of the roles and permissions supported by Cloud Spanner. </dd>
<dd>
<a href="https://cloud.google.com/iam/docs/overview#permissions">IAM Overview</a> for an introduction to Identity and Access Management in Google Cloud Platform. </dd></dl>

<p class="definition">Definition at line <a class="el" href="database__admin__client_8cc_source.html#l00072">72</a> of file <a class="el" href="database__admin__client_8cc_source.html">database_admin_client.cc</a>.</p>

</div>
</div>
<a id="a8a27a871994081f7cb7ad726b4aecc60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a27a871994081f7cb7ad726b4aecc60">&#9670;&nbsp;</a></span>SetIamPolicy() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">StatusOr&lt; google::iam::v1::Policy &gt; google::cloud::spanner::v0::DatabaseAdminClient::SetIamPolicy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Database.html">Database</a> const &amp;&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacegoogle_1_1cloud_1_1spanner_1_1v0.html#a17be538be6a68b58dc90bd72c47af092">IamUpdater</a> const &amp;&#160;</td>
          <td class="paramname"><em>updater</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the IAM policy for an instance using an optimistic concurrency control loop. </p>
<p>This function repeatedly reads the current IAM policy in <code>db</code>, and then calls the <code>updater</code> with the this policy. The <code>updater</code> returns an empty optional if no changes are required, or it returns the new desired value for the IAM policy. This function then updates the policy.</p>
<p>Updating an IAM policy can fail with retryable errors or can be aborted because there were simultaneous changes the to IAM policy. In these cases this function reruns the loop until it succeeds.</p>
<p>The function returns the final IAM policy, or an error if the rerun policy for the underlying connection has expired.</p>
<dl class="section user"><dt>Idempotency</dt><dd>This function always sets the <code>etag</code> field on the policy, so the underlying RPCs are retried automatically.</dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><span class="keywordtype">void</span> AddDatabaseReaderOnDatabase(</div><div class="line">    google::cloud::spanner::DatabaseAdminClient client,</div><div class="line">    std::string <span class="keyword">const</span>&amp; project_id, std::string <span class="keyword">const</span>&amp; instance_id,</div><div class="line">    std::string <span class="keyword">const</span>&amp; database_id, std::string <span class="keyword">const</span>&amp; new_reader) {</div><div class="line">  google::cloud::spanner::Database database(project_id, instance_id,</div><div class="line">                                            database_id);</div><div class="line">  <span class="keyword">auto</span> current = client.GetIamPolicy(database);</div><div class="line">  <span class="keywordflow">if</span> (!current) <span class="keywordflow">throw</span> std::runtime_error(current.status().message());</div><div class="line"></div><div class="line">  <span class="comment">// Find (or create) the binding for &quot;roles/spanner.databaseReader&quot;.</span></div><div class="line">  <span class="keyword">auto</span>&amp; binding = [&amp;current]() -&gt; google::iam::v1::Binding&amp; {</div><div class="line">    <span class="keyword">auto</span> role_pos =</div><div class="line">        std::find_if(current-&gt;mutable_bindings()-&gt;begin(),</div><div class="line">                     current-&gt;mutable_bindings()-&gt;end(),</div><div class="line">                     [](google::iam::v1::Binding <span class="keyword">const</span>&amp; b) {</div><div class="line">                       <span class="keywordflow">return</span> b.role() == <span class="stringliteral">&quot;roles/spanner.databaseReader&quot;</span> &amp;&amp;</div><div class="line">                              !b.has_condition();</div><div class="line">                     });</div><div class="line">    <span class="keywordflow">if</span> (role_pos != current-&gt;mutable_bindings()-&gt;end()) {</div><div class="line">      <span class="keywordflow">return</span> *role_pos;</div><div class="line">    }</div><div class="line">    <span class="keyword">auto</span>&amp; binding = *current-&gt;add_bindings();</div><div class="line">    binding.set_role(<span class="stringliteral">&quot;roles/spanner.databaseReader&quot;</span>);</div><div class="line">    <span class="keywordflow">return</span> binding;</div><div class="line">  }();</div><div class="line"></div><div class="line">  <span class="keyword">auto</span> member_pos =</div><div class="line">      std::find(binding.members().begin(), binding.members().end(), new_reader);</div><div class="line">  <span class="keywordflow">if</span> (member_pos != binding.members().end()) {</div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;The entity &quot;</span> &lt;&lt; new_reader</div><div class="line">              &lt;&lt; <span class="stringliteral">&quot; is already a database reader:\n&quot;</span></div><div class="line">              &lt;&lt; current-&gt;DebugString();</div><div class="line">    <span class="keywordflow">return</span>;</div><div class="line">  }</div><div class="line"></div><div class="line">  binding.add_members(new_reader);</div><div class="line">  <span class="keyword">auto</span> result = client.SetIamPolicy(database, *std::move(current));</div><div class="line">  <span class="keywordflow">if</span> (!result) <span class="keywordflow">throw</span> std::runtime_error(result.status().message());</div><div class="line"></div><div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Successfully added &quot;</span> &lt;&lt; new_reader</div><div class="line">            &lt;&lt; <span class="stringliteral">&quot; to the database reader role:\n&quot;</span></div><div class="line">            &lt;&lt; result-&gt;DebugString() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line">}</div></div><!-- fragment --> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>the identifier for the database where you want to change the IAM policy. </td></tr>
    <tr><td class="paramname">updater</td><td>a callback to modify the policy. Return an unset optional to indicate that no changes to the policy are needed. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="database__admin__client_8cc_source.html#l00077">77</a> of file <a class="el" href="database__admin__client_8cc_source.html">database_admin_client.cc</a>.</p>

</div>
</div>
<a id="ae3904f44d08265ea643460b60430b2f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3904f44d08265ea643460b60430b2f4">&#9670;&nbsp;</a></span>SetIamPolicy() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">StatusOr&lt; google::iam::v1::Policy &gt; google::cloud::spanner::v0::DatabaseAdminClient::SetIamPolicy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Database.html">Database</a> const &amp;&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacegoogle_1_1cloud_1_1spanner_1_1v0.html#a17be538be6a68b58dc90bd72c47af092">IamUpdater</a> const &amp;&#160;</td>
          <td class="paramname"><em>updater</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="namespacegoogle_1_1cloud_1_1spanner_1_1v0.html#a52b5d68feb45c40d761c79ee360b804c">TransactionRerunPolicy</a> &gt;&#160;</td>
          <td class="paramname"><em>rerun_policy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="namespacegoogle_1_1cloud_1_1spanner_1_1v0.html#ae9894cd07fd5d6262b10e01f1307c951">BackoffPolicy</a> &gt;&#160;</td>
          <td class="paramname"><em>backoff_policy</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the IAM policy for an instance using an optimistic concurrency control loop. </p>
<p>This function repeatedly reads the current IAM policy in <code>db</code>, and then calls the <code>updater</code> with the this policy. The <code>updater</code> returns an empty optional if no changes are required, or it returns the new desired value for the IAM policy. This function then updates the policy.</p>
<p>Updating an IAM policy can fail with retryable errors or can be aborted because there were simultaneous changes the to IAM policy. In these cases this function reruns the loop until it succeeds.</p>
<p>The function returns the final IAM policy, or an error if the rerun policy for the underlying connection has expired.</p>
<dl class="section user"><dt>Idempotency</dt><dd>This function always sets the <code>etag</code> field on the policy, so the underlying RPCs are retried automatically.</dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><span class="keywordtype">void</span> AddDatabaseReaderOnDatabase(</div><div class="line">    google::cloud::spanner::DatabaseAdminClient client,</div><div class="line">    std::string <span class="keyword">const</span>&amp; project_id, std::string <span class="keyword">const</span>&amp; instance_id,</div><div class="line">    std::string <span class="keyword">const</span>&amp; database_id, std::string <span class="keyword">const</span>&amp; new_reader) {</div><div class="line">  google::cloud::spanner::Database database(project_id, instance_id,</div><div class="line">                                            database_id);</div><div class="line">  <span class="keyword">auto</span> current = client.GetIamPolicy(database);</div><div class="line">  <span class="keywordflow">if</span> (!current) <span class="keywordflow">throw</span> std::runtime_error(current.status().message());</div><div class="line"></div><div class="line">  <span class="comment">// Find (or create) the binding for &quot;roles/spanner.databaseReader&quot;.</span></div><div class="line">  <span class="keyword">auto</span>&amp; binding = [&amp;current]() -&gt; google::iam::v1::Binding&amp; {</div><div class="line">    <span class="keyword">auto</span> role_pos =</div><div class="line">        std::find_if(current-&gt;mutable_bindings()-&gt;begin(),</div><div class="line">                     current-&gt;mutable_bindings()-&gt;end(),</div><div class="line">                     [](google::iam::v1::Binding <span class="keyword">const</span>&amp; b) {</div><div class="line">                       <span class="keywordflow">return</span> b.role() == <span class="stringliteral">&quot;roles/spanner.databaseReader&quot;</span> &amp;&amp;</div><div class="line">                              !b.has_condition();</div><div class="line">                     });</div><div class="line">    <span class="keywordflow">if</span> (role_pos != current-&gt;mutable_bindings()-&gt;end()) {</div><div class="line">      <span class="keywordflow">return</span> *role_pos;</div><div class="line">    }</div><div class="line">    <span class="keyword">auto</span>&amp; binding = *current-&gt;add_bindings();</div><div class="line">    binding.set_role(<span class="stringliteral">&quot;roles/spanner.databaseReader&quot;</span>);</div><div class="line">    <span class="keywordflow">return</span> binding;</div><div class="line">  }();</div><div class="line"></div><div class="line">  <span class="keyword">auto</span> member_pos =</div><div class="line">      std::find(binding.members().begin(), binding.members().end(), new_reader);</div><div class="line">  <span class="keywordflow">if</span> (member_pos != binding.members().end()) {</div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;The entity &quot;</span> &lt;&lt; new_reader</div><div class="line">              &lt;&lt; <span class="stringliteral">&quot; is already a database reader:\n&quot;</span></div><div class="line">              &lt;&lt; current-&gt;DebugString();</div><div class="line">    <span class="keywordflow">return</span>;</div><div class="line">  }</div><div class="line"></div><div class="line">  binding.add_members(new_reader);</div><div class="line">  <span class="keyword">auto</span> result = client.SetIamPolicy(database, *std::move(current));</div><div class="line">  <span class="keywordflow">if</span> (!result) <span class="keywordflow">throw</span> std::runtime_error(result.status().message());</div><div class="line"></div><div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Successfully added &quot;</span> &lt;&lt; new_reader</div><div class="line">            &lt;&lt; <span class="stringliteral">&quot; to the database reader role:\n&quot;</span></div><div class="line">            &lt;&lt; result-&gt;DebugString() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line">}</div></div><!-- fragment --> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>the identifier for the database where you want to change the IAM policy. </td></tr>
    <tr><td class="paramname">updater</td><td>a callback to modify the policy. Return an unset optional to indicate that no changes to the policy are needed.</td></tr>
    <tr><td class="paramname">rerun_policy</td><td>controls for how long (or how many times) the updater will be rerun after the IAM policy update aborts. </td></tr>
    <tr><td class="paramname">backoff_policy</td><td>controls how long <code>SetIamPolicy</code> waits between reruns. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="database__admin__client_8cc_source.html#l00095">95</a> of file <a class="el" href="database__admin__client_8cc_source.html">database_admin_client.cc</a>.</p>

</div>
</div>
<a id="a440216e84d05c6e7f7fd285012d342e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a440216e84d05c6e7f7fd285012d342e8">&#9670;&nbsp;</a></span>TestIamPermissions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">StatusOr&lt; google::iam::v1::TestIamPermissionsResponse &gt; google::cloud::spanner::v0::DatabaseAdminClient::TestIamPermissions </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Database.html">Database</a>&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::string &gt;&#160;</td>
          <td class="paramname"><em>permissions</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the subset of the permissions the caller has on the given database. </p>
<p>This function compares the given list of permissions against those permissions granted to the caller, and returns the subset of the list that the caller actually holds.</p>
<dl class="section note"><dt>Note</dt><dd>Permission wildcards, such as <code>spanner.*</code> are not allowed.</dd></dl>
<dl class="section user"><dt>Idempotency</dt><dd>This operation is read-only and therefore always idempotent.</dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><span class="keywordtype">void</span> DatabaseTestIamPermissions(</div><div class="line">    google::cloud::spanner::DatabaseAdminClient client,</div><div class="line">    std::string <span class="keyword">const</span>&amp; project_id, std::string <span class="keyword">const</span>&amp; instance_id,</div><div class="line">    std::string <span class="keyword">const</span>&amp; database_id, std::string <span class="keyword">const</span>&amp; permission) {</div><div class="line">  google::cloud::spanner::Database db(project_id, instance_id, database_id);</div><div class="line">  <span class="keyword">auto</span> actual = client.TestIamPermissions(db, {permission});</div><div class="line">  <span class="keywordflow">if</span> (!actual) <span class="keywordflow">throw</span> std::runtime_error(actual.status().message());</div><div class="line"></div><div class="line">  <span class="keywordtype">char</span> <span class="keyword">const</span>* msg = actual-&gt;permissions().empty() ? <span class="stringliteral">&quot;does not&quot;</span> : <span class="stringliteral">&quot;does&quot;</span>;</div><div class="line"></div><div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;The caller &quot;</span> &lt;&lt; msg &lt;&lt; <span class="stringliteral">&quot; have permission &#39;&quot;</span> &lt;&lt; permission</div><div class="line">            &lt;&lt; <span class="stringliteral">&quot;&#39; on the Cloud Spanner database &quot;</span> &lt;&lt; db.database_id() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line">}</div></div><!-- fragment --> </dd></dl>
<dl class="section see"><dt>See also</dt><dd>The <a href="https://cloud.google.com/spanner/docs/iam">Cloud Spanner documentation</a> for a description of the roles and permissions supported by Cloud Spanner. </dd>
<dd>
<a href="https://cloud.google.com/iam/docs/overview#permissions">IAM Overview</a> for an introduction to Identity and Access Management in Google Cloud Platform. </dd></dl>

<p class="definition">Definition at line <a class="el" href="database__admin__client_8cc_source.html#l00126">126</a> of file <a class="el" href="database__admin__client_8cc_source.html">database_admin_client.cc</a>.</p>

</div>
</div>
<a id="ae46773edb7c197c937d8e006709f00a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae46773edb7c197c937d8e006709f00a4">&#9670;&nbsp;</a></span>UpdateBackupExpireTime() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">StatusOr&lt; gcsa::Backup &gt; google::cloud::spanner::v0::DatabaseAdminClient::UpdateBackupExpireTime </td>
          <td>(</td>
          <td class="paramtype">google::spanner::admin::database::v1::Backup const &amp;&#160;</td>
          <td class="paramname"><em>backup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::chrono::system_clock::time_point const &amp;&#160;</td>
          <td class="paramname"><em>expire_time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update backup's <code>expire_time</code>. </p>
<dl class="section user"><dt>Idempotency</dt><dd>This operation is idempotent as its result does not depend on the previous state of the backup. Note that, as is the case with all operations, it is subject to race conditions if multiple tasks are attempting to change the expire time in the same backup. </dd></dl>

<p class="definition">Definition at line <a class="el" href="database__admin__client_8cc_source.html#l00156">156</a> of file <a class="el" href="database__admin__client_8cc_source.html">database_admin_client.cc</a>.</p>

</div>
</div>
<a id="a0116a185e33da025ebdfd15fa0682099"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0116a185e33da025ebdfd15fa0682099">&#9670;&nbsp;</a></span>UpdateBackupExpireTime() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">StatusOr&lt; gcsa::Backup &gt; google::cloud::spanner::v0::DatabaseAdminClient::UpdateBackupExpireTime </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Backup.html">Backup</a> const &amp;&#160;</td>
          <td class="paramname"><em>backup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::chrono::system_clock::time_point const &amp;&#160;</td>
          <td class="paramname"><em>expire_time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update backup's <code>expire_time</code>. </p>
<dl class="section user"><dt>Idempotency</dt><dd>This operation is idempotent as its result does not depend on the previous state of the backup. Note that, as is the case with all operations, it is subject to race conditions if multiple tasks are attempting to change the expire time in the same backup.</dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><span class="keywordtype">void</span> UpdateBackup(google::cloud::spanner::DatabaseAdminClient client,</div><div class="line">                  std::string <span class="keyword">const</span>&amp; project_id, std::string <span class="keyword">const</span>&amp; instance_id,</div><div class="line">                  std::string <span class="keyword">const</span>&amp; backup_id) {</div><div class="line">  using ::google::cloud::StatusOr;</div><div class="line">  google::cloud::spanner::Backup backup_name(</div><div class="line">      google::cloud::spanner::Instance(project_id, instance_id), backup_id);</div><div class="line">  <span class="keyword">auto</span> backup = client.UpdateBackupExpireTime(</div><div class="line">      backup_name, std::chrono::system_clock::now() + std::chrono::hours(7));</div><div class="line">  <span class="keywordflow">if</span> (!backup.ok()) <span class="keywordflow">throw</span> std::runtime_error(backup.status().message());</div><div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Backup &#39;&quot;</span> &lt;&lt; backup-&gt;name() &lt;&lt; <span class="stringliteral">&quot;&#39; updated to new expire_time &quot;</span></div><div class="line">            &lt;&lt; google::protobuf::util::TimeUtil::ToString(backup-&gt;expire_time())</div><div class="line">            &lt;&lt; <span class="stringliteral">&quot;.\n&quot;</span>;</div><div class="line">}</div></div><!-- fragment --></dd></dl>

<p class="definition">Definition at line <a class="el" href="database__admin__client_8cc_source.html#l00171">171</a> of file <a class="el" href="database__admin__client_8cc_source.html">database_admin_client.cc</a>.</p>

</div>
</div>
<a id="a772381bd10480013561ad30dccd3f7db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a772381bd10480013561ad30dccd3f7db">&#9670;&nbsp;</a></span>UpdateDatabase()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">future&lt; StatusOr&lt; gcsa::UpdateDatabaseDdlMetadata &gt; &gt; google::cloud::spanner::v0::DatabaseAdminClient::UpdateDatabase </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classgoogle_1_1cloud_1_1spanner_1_1v0_1_1Database.html">Database</a>&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::string &gt;&#160;</td>
          <td class="paramname"><em>statements</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the database using a series of DDL statements. </p>
<p>This function schedules a series of updates to the database using a sequence of DDL statements.</p>
<dl class="section return"><dt>Returns</dt><dd>A <code>google::cloud::future</code> that becomes satisfied when all the statements complete. Note that Cloud Spanner may fail to execute some of the statements.</dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><span class="keywordtype">void</span> AddColumn(google::cloud::spanner::DatabaseAdminClient client,</div><div class="line">               std::string <span class="keyword">const</span>&amp; project_id, std::string <span class="keyword">const</span>&amp; instance_id,</div><div class="line">               std::string <span class="keyword">const</span>&amp; database_id) {</div><div class="line">  using ::google::cloud::future;</div><div class="line">  using ::google::cloud::StatusOr;</div><div class="line">  google::cloud::spanner::Database database(project_id, instance_id,</div><div class="line">                                            database_id);</div><div class="line">  future&lt;</div><div class="line">      StatusOr&lt;google::spanner::admin::database::v1::UpdateDatabaseDdlMetadata&gt;&gt;</div><div class="line">      f = client.UpdateDatabase(</div><div class="line">          database, {<span class="stringliteral">&quot;ALTER TABLE Albums ADD COLUMN MarketingBudget INT64&quot;</span>});</div><div class="line">  StatusOr&lt;google::spanner::admin::database::v1::UpdateDatabaseDdlMetadata&gt;</div><div class="line">      metadata = f.get();</div><div class="line">  <span class="keywordflow">if</span> (!metadata) <span class="keywordflow">throw</span> std::runtime_error(metadata.status().message());</div><div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Added MarketingBudget column\n&quot;</span>;</div><div class="line">}</div></div><!-- fragment --> </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a href="https://cloud.google.com/spanner/docs/data-definition-language">https://cloud.google.com/spanner/docs/data-definition-language</a> for a full list of the DDL operations </dd></dl>

<p class="definition">Definition at line <a class="el" href="database__admin__client_8cc_source.html#l00044">44</a> of file <a class="el" href="database__admin__client_8cc_source.html">database_admin_client.cc</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
